<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Node-sdk by PortaText</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Node-sdk</h1>
        <p>NodeJS Client for the PortaText API</p>

        <p class="view"><a href="https://github.com/PortaText/node-sdk">View the Project on GitHub <small>PortaText/node-sdk</small></a></p>


        <ul>
          <li><a href="https://github.com/PortaText/node-sdk/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/PortaText/node-sdk/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/PortaText/node-sdk">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><a href="http://img.shields.io/badge/license-APACHE2-blue.svg"><img src="http://img.shields.io/badge/license-APACHE2-blue.svg" alt="License"></a>
<a href="https://badge.fury.io/js/portatext"><img src="https://badge.fury.io/js/portatext.svg" alt="npm version"></a>
<a href="http://portatext-node-sdk.readthedocs.org/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/portatext-node-sdk/badge/?version=latest" alt="Documentation Status"></a>
<a href="https://github.com/feross/standard"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat" alt="js-standard-style"></a></p>

<p><a href="https://travis-ci.org/PortaText/node-sdk"><img src="https://travis-ci.org/PortaText/node-sdk.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/PortaText/node-sdk?branch=master"><img src="https://coveralls.io/repos/PortaText/node-sdk/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a>
<a href="https://codeclimate.com/github/PortaText/node-sdk"><img src="https://codeclimate.com/github/PortaText/node-sdk/badges/gpa.svg" alt="Code Climate"></a>
<a href="https://codeclimate.com/github/PortaText/node-sdk"><img src="https://codeclimate.com/github/PortaText/node-sdk/badges/issue_count.svg" alt="Issue Count"></a></p>

<h1>
<a id="node-sdk" class="anchor" href="#node-sdk" aria-hidden="true"><span class="octicon octicon-link"></span></a>node-sdk</h1>

<p>Official NodeJS Client for the <a href="https://www.portatext.com/">PortaText</a> API.</p>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h1>

<ul>
<li>The <a href="https://github.com/PortaText/node-sdk/tree/master/test/endpoints">endpoint tests</a> should also serve as good doucmentation on how to use the API.</li>
<li>General PortaText documentation (including the REST API) can be found at the <a href="https://github.com/PortaText/docs/wiki">PortaText wiki</a>.</li>
</ul>

<h1>
<a id="installing" class="anchor" href="#installing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing</h1>

<p>Add this library to your <a href="https://docs.npmjs.com/getting-started/using-a-package.json">package.json</a> configuration:</p>

<div class="highlight highlight-source-json"><pre>  <span class="pl-s"><span class="pl-pds">"</span>dependencies<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>portatext<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>latest<span class="pl-pds">"</span></span>
  }</pre></div>

<h1>
<a id="basic-use" class="anchor" href="#basic-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic use</h1>

<h2>
<a id="getting-a-client-instance" class="anchor" href="#getting-a-client-instance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting a client instance</h2>

<p>The first thing is to get a <a href="https://github.com/PortaText/node-sdk/blob/master/src/client/client.js">Client</a> instance, for example
the <a href="https://github.com/PortaText/node-sdk/blob/master/src/client/client_http.js">Curl</a> implementation:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> portatextMod <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>portatext<span class="pl-pds">'</span></span>);
<span class="pl-k">var</span> portatext <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">portatextMod.ClientHttp</span>();</pre></div>

<h2>
<a id="optional-set-your-logger" class="anchor" href="#optional-set-your-logger" aria-hidden="true"><span class="octicon octicon-link"></span></a>(Optional) Set your logger</h2>

<p>You can optionally set a <a href="https://nodejs.org/api/console.html">Console</a> compatible logger:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">portatext</span>.<span class="pl-en">setLogger</span>(<span class="pl-en">console</span>);</pre></div>

<p>By default, the client will use the <a href="https://github.com/PortaText/node-sdk/blob/master/src/null_logger.js">NullLogger</a>.</p>

<h2>
<a id="authenticating" class="anchor" href="#authenticating" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authenticating</h2>

<p>You can authenticate to the endpoints by using your <a href="https://github.com/PortaText/docs/wiki/REST-API#auth_api">API key</a> or your username/password. This translates to
either doing this:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">portatext</span>.<span class="pl-en">setApiKey</span>(apiKey);</pre></div>

<p>Or this:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">portatext</span>.<span class="pl-en">setCredentials</span>(username, password);</pre></div>

<p>When you specify a <a href="https://github.com/PortaText/docs/wiki/REST-API#auth_basic">username and password</a> instead of an api key, the sdk will
automatically login and get a <a href="https://github.com/PortaText/docs/wiki/REST-API#auth_session">session token</a> when needed.</p>

<h1>
<a id="using-the-endpoints" class="anchor" href="#using-the-endpoints" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the endpoints</h1>

<p>All the API commands can be found in the <a href="https://github.com/PortaText/php-sdk/tree/master/src/PortaText/Command/Api">Command/Api</a>
directory. The client offers a way to instantiate them by just calling them by their name.</p>

<h2>
<a id="quick-example" class="anchor" href="#quick-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick example</h2>

<p>As an example, to create a template, you would do:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$result</span> <span class="pl-k">=</span> <span class="pl-smi">$client</span></span>
<span class="pl-s1">  <span class="pl-k">-&gt;</span>templates()                       <span class="pl-c">// Get an instance of the Templates endpoint.</span></span>
<span class="pl-s1">  <span class="pl-k">-&gt;</span>text(<span class="pl-s"><span class="pl-pds">"</span>The text of my template<span class="pl-pds">"</span></span>)</span>
<span class="pl-s1">  <span class="pl-k">-&gt;</span>description(<span class="pl-s"><span class="pl-pds">"</span>My first template<span class="pl-pds">"</span></span>)</span>
<span class="pl-s1">  <span class="pl-k">-&gt;</span>name(<span class="pl-s"><span class="pl-pds">"</span>template1<span class="pl-pds">"</span></span>)</span>
<span class="pl-s1">  <span class="pl-k">-&gt;</span>post();                           <span class="pl-c">// Call the Templates endpoint with a POST.</span></span></pre></div>

<p>To get a template by id:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$result</span> <span class="pl-k">=</span> <span class="pl-smi">$client</span><span class="pl-k">-&gt;</span>templates()<span class="pl-k">-&gt;</span>id(<span class="pl-c1">45</span>)<span class="pl-k">-&gt;</span>get();</span></pre></div>

<p>Or, to get all the templates:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$result</span> <span class="pl-k">=</span> <span class="pl-smi">$client</span><span class="pl-k">-&gt;</span>templates()<span class="pl-k">-&gt;</span>get();</span></pre></div>

<h2>
<a id="the-result" class="anchor" href="#the-result" aria-hidden="true"><span class="octicon octicon-link"></span></a>The result</h2>

<p>After calling an endpoint, one of two things can happen:</p>

<ul>
<li>A <a href="https://github.com/PortaText/php-sdk/tree/master/src/PortaText/Exception">PortaText Exception</a> is thrown.</li>
<li>A <a href="https://github.com/PortaText/php-sdk/blob/master/src/PortaText/Command/Result.php">Result</a> instance is returned.</li>
</ul>

<p>Also, when possible, your PortaText exception will contain a <code>Result</code> object that
can be retrieved by calling <code>getResult()</code> on the exception. This is usually useful for the
<a href="https://github.com/PortaText/php-sdk/blob/master/src/PortaText/Exception/ClientError.php">ClientError</a> exception, where
you will be able to see if a field was missing or different than what was expected.</p>

<h3>
<a id="testing-for-success" class="anchor" href="#testing-for-success" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing for success</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$result</span><span class="pl-k">-&gt;</span><span class="pl-smi">success</span>) {</span>
<span class="pl-s1">    <span class="pl-k">...</span></span>
<span class="pl-s1">}</span></pre></div>

<h3>
<a id="getting-error-strings-back-from-the-server" class="anchor" href="#getting-error-strings-back-from-the-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting error strings back from the server</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-c1">is_null</span>(<span class="pl-smi">$result</span><span class="pl-k">-&gt;</span><span class="pl-smi">errors</span>) {</span>
<span class="pl-s1">    <span class="pl-k">foreach</span> (<span class="pl-smi">$result</span><span class="pl-k">-&gt;</span><span class="pl-smi">errors</span> <span class="pl-k">as</span> <span class="pl-smi">$error</span>) {</span>
<span class="pl-s1">        <span class="pl-k">...</span></span>
<span class="pl-s1">  }</span>
<span class="pl-s1">}</span></pre></div>

<h3>
<a id="getting-data-back-from-the-server" class="anchor" href="#getting-data-back-from-the-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting data back from the server</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$result</span><span class="pl-k">-&gt;</span><span class="pl-smi">success</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-smi">$result</span><span class="pl-k">-&gt;</span><span class="pl-smi">data</span>;</span>
<span class="pl-s1">}</span></pre></div>

<h1>
<a id="developers" class="anchor" href="#developers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developers</h1>

<p>This project uses standard <a href="https://docs.npmjs.com/cli/run-script">npm scripts</a>. Current tasks include:</p>

<ul>
<li>test: Runs <a href="https://mochajs.org/">Mocha</a> tests.</li>
<li>jsdoc: Runs <a href="http://usejsdoc.org/">JSDoc</a>.</li>
<li>eslint: Runs <a href="http://eslint.org/">ESLint</a>.</li>
<li>coverage: Runs the tests and then <a href="https://gotwarlost.github.io/istanbul/">Instanbul</a> to get a coverage report.</li>
<li>build: This is the default task, and will run all the other tasks.</li>
</ul>

<h2>
<a id="running-a-phing-task" class="anchor" href="#running-a-phing-task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running a phing task</h2>

<p>To run a task, just do:</p>

<div class="highlight highlight-source-shell"><pre>npm run build</pre></div>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>To contribute:</p>

<ul>
<li>Make sure you open a <strong>concise</strong> and <strong>short</strong> pull request.</li>
<li>Throw in any needed unit tests to accomodate the new code or the
changes involved.</li>
<li>Run <code>npm run build</code> and make sure everything is ok before submitting the pull
request (make eslint happy).</li>
<li>Your code must comply with the <a href="https://github.com/feross/standard">Javascript Standard Style</a>,
ESLint should take care of that.</li>
<li>If your code is accepted, it will belong to PortaText and will be published
under the Apache2 License.</li>
</ul>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h1>

<p>The source code is released under Apache 2 License.</p>

<p>Check <a href="https://github.com/PortaText/node-sdk/blob/master/LICENSE">LICENSE</a> file for more information.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/PortaText">PortaText</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
